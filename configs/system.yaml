# KaiBrain 系统配置
# =====================

system:
  name: "KaiBrain"
  version: "0.1.0"
  debug: false
  log_level: "INFO"

# 大脑管道配置
brain_pipeline:
  # 消息总线类型: memory, redis, zeromq
  message_bus_type: "memory"
  # Redis连接URL（当使用redis时）
  redis_url: null
  # 最大队列大小
  max_queue_size: 10000
  # 消息超时时间（秒）
  message_timeout: 30.0

# =====================
# LLM配置
# =====================
llm:
  # 默认LLM提供商
  # 可选: openai, anthropic, kimi, glm, qwen, doubao, deepseek, ollama
  default_provider: "openai"
  
  # 各提供商配置
  providers:
    # ========== 国际模型 ==========
    openai:
      api_key: "${OPENAI_API_KEY}"
      model: "gpt-4o"
      base_url: null  # 默认OpenAI官方API
      timeout: 60.0
      max_retries: 3
    
    anthropic:
      api_key: "${ANTHROPIC_API_KEY}"
      model: "claude-sonnet-4-20250514"
      timeout: 60.0
      max_retries: 3
    
    # ========== 国产大模型 (OpenAI兼容API) ==========
    # Kimi (月之暗面 Moonshot AI)
    # 官网: https://platform.moonshot.cn/
    kimi:
      api_key: "${KIMI_API_KEY}"
      model: "moonshot-v1-128k"  # 可选: moonshot-v1-8k, moonshot-v1-32k, moonshot-v1-128k
      base_url: "https://api.moonshot.cn/v1"
      timeout: 60.0
      max_retries: 3
    
    # GLM (智谱清言)
    # 官网: https://open.bigmodel.cn/
    glm:
      api_key: "${GLM_API_KEY}"
      model: "glm-4-plus"  # 可选: glm-4, glm-4-plus, glm-4-air, glm-4-flash
      base_url: "https://open.bigmodel.cn/api/paas/v4"
      timeout: 60.0
      max_retries: 3
    
    # Qwen (通义千问)
    # 官网: https://dashscope.aliyun.com/
    qwen:
      api_key: "${QWEN_API_KEY}"
      model: "qwen-max"  # 可选: qwen-turbo, qwen-plus, qwen-max, qwen-max-longcontext
      base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
      timeout: 60.0
      max_retries: 3
    
    # Doubao (字节豆包)
    # 官网: https://www.volcengine.com/product/doubao
    doubao:
      api_key: "${DOUBAO_API_KEY}"
      model: "doubao-pro-32k"  # 需要在火山引擎创建推理接入点获取endpoint_id
      base_url: "https://ark.cn-beijing.volces.com/api/v3"
      timeout: 60.0
      max_retries: 3
    
    # DeepSeek
    # 官网: https://platform.deepseek.com/
    deepseek:
      api_key: "${DEEPSEEK_API_KEY}"
      model: "deepseek-chat"  # 可选: deepseek-chat, deepseek-coder
      base_url: "https://api.deepseek.com/v1"
      timeout: 60.0
      max_retries: 3
    
    # ========== 本地模型 ==========
    ollama:
      base_url: "http://localhost:11434"
      model: "llama3.2"  # 需要先用 ollama pull 下载
      timeout: 120.0

# =====================
# 工具系统配置
# =====================
tools:
  # 内建工具开关
  builtin:
    shell: true       # Shell命令执行
    file: true        # 文件操作
    http: true        # HTTP请求
    python: false     # Python代码执行（默认关闭，安全考虑）
  
  # 工具执行配置
  executor:
    default_timeout: 30.0    # 默认超时时间（秒）
    max_concurrent: 5        # 最大并发执行数
  
  # MCP Server连接配置
  mcp_servers: []
    # 示例配置:
    # - id: "filesystem"
    #   transport: "stdio"
    #   command: "npx"
    #   args: ["-y", "@modelcontextprotocol/server-filesystem", "/workspace"]
    #
    # - id: "github"
    #   transport: "stdio"
    #   command: "npx"
    #   args: ["-y", "@modelcontextprotocol/server-github"]
    #   env:
    #     GITHUB_TOKEN: "${GITHUB_TOKEN}"
    #
    # - id: "database"
    #   transport: "sse"
    #   url: "http://localhost:3000/mcp"

# 数据层配置
data:
  # 显性数据
  explicit_db_url: "sqlite:///data/explicit.db"
  vector_db_path: "data/vectordb"
  graph_db_url: null  # Neo4j URL (可选)
  
  # 隐性数据
  implicit_policy_path: "data/policies"
  implicit_mech_config_path: "data/mech_config"

# Agent配置
agent:
  # 最大并发Agent数
  max_concurrent_agents: 100
  # Agent超时时间（秒）
  agent_timeout: 60.0
  # 健康检查间隔（秒）
  health_check_interval: 10.0
  # Agent Loop最大迭代次数
  max_iterations: 15
  # 默认系统提示词
  default_system_prompt: |
    你是KaiBrain，一个具身智能机器人的大脑系统。
    你可以使用工具来完成任务。
    在执行操作前，请先思考计划，然后逐步执行。
