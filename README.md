# OpenRoboBrain (ORB) - å…·èº«æ™ºèƒ½æœºå™¨äººå¤§è„‘ç³»ç»Ÿ

å¼€æºé¡¹ç›® | ç‰ˆæœ¬: 0.2.0 | Python åŒ…å: `orb`

## é¡¹ç›®çŠ¶æ€

**å½“å‰é˜¶æ®µ**: æ ¸å¿ƒåŠŸèƒ½å·²è´¯é€šï¼ŒMuJoCo G1 ä»¿çœŸæ¼”ç¤ºå¼€å‘ä¸­

- ä¸ƒå±‚æ¶æ„ + åŒç®¡é“é€šä¿¡å®Œæ•´å®ç°
- LLM åŒæ¨¡å¼ç®¡çº¿ (Ollama æœ¬åœ° / äº‘ç«¯ API)
- ç±»äººè®°å¿†ç³»ç»Ÿ (MemoryRanker: 5ä¿¡å·æ’åº + é—å¿˜æ›²çº¿ + æ‰©æ•£æ¿€æ´»)
- Session Compaction (è‡ªåŠ¨å‹ç¼© + LLM æ‘˜è¦)
- MuJoCo G1 ä»¿çœŸä¸‰ç»ˆç«¯æ¼”ç¤º (feature/mujoco-g1-sim åˆ†æ”¯)
- 219 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡

**æ€»ä½“å®Œæˆåº¦**: ~60%

---

## æ¶æ„æ¦‚è§ˆ

### æ ¸å¿ƒè®¾è®¡ï¼šå¤§è„‘-å°è„‘å®Œå…¨è§£è€¦

OpenRoboBrain é‡‡ç”¨**å¤§å°è„‘åŒç®¡é“æ¶æ„**ï¼Œä¸¤è€…å®Œå…¨è§£è€¦ï¼Œé€šè¿‡ Bridgeï¼ˆæ¡¥æ¥å™¨ï¼‰ä½œä¸ºå”¯ä¸€äº¤äº’ç‚¹è¿›è¡ŒçŠ¶æ€åŒæ­¥ã€‚

| ç»´åº¦ | å¤§è„‘ (Brain) | å°è„‘ (Cerebellum) |
|------|-------------|------------------|
| **é€šä¿¡åè®®** | WebSocket JSON | ROS2 DDS |
| **æ—¶é—´å°ºåº¦** | ç§’çº§ï¼ˆè®¤çŸ¥å†³ç­–ï¼‰ | æ¯«ç§’çº§ï¼ˆè¿åŠ¨æ§åˆ¶ï¼‰ |
| **å·¥å…·ç³»ç»Ÿ** | è®¤çŸ¥å·¥å…·ï¼ˆæœç´¢/æ–‡ä»¶/HTTP/LLMï¼‰ | ç¡¬ä»¶é©±åŠ¨ï¼ˆä¼ æ„Ÿå™¨/æ‰§è¡Œå™¨ï¼‰ |
| **è®°å¿†ç³»ç»Ÿ** | æ˜¾æ€§æ•°æ®ï¼ˆå¯Agentä¿®æ”¹ï¼‰ | éšæ€§æ•°æ®ï¼ˆä»…äººå·¥ä¿®æ”¹ï¼‰ |
| **æ²™ç®±æœºåˆ¶** | æƒé™æ§åˆ¶/Docker | ç¡¬ä»¶å®‰å…¨ç­–ç•¥ |

### ä¸ƒå±‚æ¶æ„

```mermaid
flowchart TB
    subgraph UserInterface [ç”¨æˆ·æ¥å£]
        UI[è¯­éŸ³/æ–‡æœ¬/æ‰‹åŠ¿è¾“å…¥]
    end

    subgraph BrainDomain [å¤§è„‘åŸŸ Brain Domain]
        subgraph BehaviorLayer [è¡Œä¸ºå±‚ Behavior Layer]
            B1[çƒ¹é¥ª] 
            B2[é©¾é©¶] 
            B3[æ¸…æ´]
            B4[...]
        end
        
        subgraph CapabilityLayer [èƒ½åŠ›å±‚ Capability Layer]
            C1[æ„ŸçŸ¥ç†è§£]
            C2[è®¤çŸ¥æ¨ç†]
            C3[è¯­è¨€äº¤äº’]
            C4[çŸ¥è¯†ç®¡ç†]
            C5[ä»»åŠ¡ç¼–æ’]
        end
        
        subgraph AgentLayer [Agentå±‚]
            SA[Super Agent<br/>ç”Ÿå‘½å‘¨æœŸç®¡ç†]
            OA[ç¼–æ’Agent<br/>ä»»åŠ¡æ‹†è§£]
            AA1[åŸå­Agent]
            AA2[åŸå­Agent]
            AAN[...]
            SA --> OA
            OA --> AA1
            OA --> AA2
            OA --> AAN
        end
        
        subgraph SystemLayer [ç³»ç»Ÿå±‚ - å¤§è„‘ç®¡é“]
            WS[WebSocket Server]
            LLM[LLM System]
            Tools[Tool System]
            Core[Core Services]
        end
    end
    
    subgraph Bridge [Bridge æ¡¥æ¥å±‚]
        BC[Brain-Cerebellum Bridge<br/>å”¯ä¸€äº¤äº’ç‚¹]
    end
    
    subgraph CerebellumDomain [å°è„‘åŸŸ Cerebellum Domain]
        subgraph MiddlewareLayer [ä¸­é—´ä»¶å±‚ - å°è„‘ç®¡é“]
            ROS[ROS2 DDS]
            Topics[Topics]
            Services[Services]
            Actions[Actions]
        end
        
        subgraph HardwareLayer [ç¡¬ä»¶å±‚]
            CS[æ§åˆ¶ç³»ç»Ÿè½¯ä»¶]
            Driver[ç¡¬ä»¶é©±åŠ¨]
            HW[ç‰©ç†ç¡¬ä»¶]
            CS --> Driver --> HW
        end
    end
    
    subgraph DataLayer [æ•°æ®å±‚ - çºµå‘è´¯ç©¿]
        direction LR
        subgraph ExplicitData [æ˜¾æ€§æ•°æ®<br/>Agentå¯ä¿®æ”¹]
            WF[å·¥ä½œæµè®°å¿†]
            Entity[å®ä½“æ•°æ®]
            KG[çŸ¥è¯†å›¾è°±]
        end
        subgraph ImplicitData [éšæ€§æ•°æ®<br/>ä»…äººå·¥ä¿®æ”¹]
            Policy[Policy]
            MechConfig[æœºæ¢°é…ç½®]
        end
    end

    UI --> BehaviorLayer
    BehaviorLayer --> CapabilityLayer
    CapabilityLayer --> AgentLayer
    AgentLayer --> SystemLayer
    SystemLayer <--> BC
    BC <--> MiddlewareLayer
    MiddlewareLayer --> HardwareLayer
    
    DataLayer -.-> BrainDomain
    DataLayer -.-> CerebellumDomain
```

#### å±‚çº§è¯´æ˜

| å±‚çº§ | èŒè´£ | çŠ¶æ€ |
|------|------|------|
| **è¡Œä¸ºå±‚** | å¤åˆè¡Œä¸ºï¼ˆçƒ¹é¥ª/é©¾é©¶ï¼‰ï¼Œå…³è”å·¥ä½œæµè®°å¿†ï¼Œé¿å…é‡å¤æ¨ç† | â³ å¾…å®ç° |
| **èƒ½åŠ›å±‚** | åŸå­è®¤çŸ¥èƒ½åŠ›ï¼ˆæ„ŸçŸ¥/æ¨ç†/äº¤äº’ï¼‰ï¼Œä¸å«è¿åŠ¨æ§åˆ¶ | â³ éª¨æ¶ |
| **Agentå±‚** | ä¸‰çº§ç»“æ„ï¼šSuper â†’ ç¼–æ’ â†’ åŸå­Agent | âœ… åŸºç¡€å®Œæˆ |
| **ç³»ç»Ÿå±‚** | å¤§è„‘ç®¡é“ï¼ˆWebSocket JSONï¼‰ï¼ŒLLM/å·¥å…·/æ ¸å¿ƒæœåŠ¡ | âœ… åŸºç¡€å®Œæˆ |
| **Bridge** | å¤§å°è„‘å”¯ä¸€äº¤äº’ç‚¹ï¼Œå‘½ä»¤ç¿»è¯‘ä¸çŠ¶æ€åŒæ­¥ | âœ… åŸºç¡€å®Œæˆ |
| **ä¸­é—´ä»¶å±‚** | å°è„‘ç®¡é“ï¼ˆROS2 DDSï¼‰ï¼Œè¯é¢˜/æœåŠ¡/Action | â³ ä»…æ¥å£ |
| **ç¡¬ä»¶å±‚** | æ§åˆ¶è½¯ä»¶ â†’ é©±åŠ¨ â†’ ç‰©ç†ç¡¬ä»¶ | â³ ä»…æ¥å£ |
| **æ•°æ®å±‚** | çºµå‘è´¯ç©¿ï¼Œæ˜¾æ€§ï¼ˆå¯å­¦ä¹ ï¼‰+ éšæ€§ï¼ˆå—ä¿æŠ¤ï¼‰ | ğŸ”¨ å†…å­˜å®ç° |

---

## ç›®å½•ç»“æ„

```
orb/
â”œâ”€â”€ core.py                 # ç³»ç»Ÿå…¥å£ âœ…
â”œâ”€â”€ agent/                  # Agentå±‚
â”‚   â”œâ”€â”€ base.py             # AgentåŸºç±»(å«LLM/å·¥å…·é›†æˆ) âœ…
â”‚   â”œâ”€â”€ smart_agent.py      # æ™ºèƒ½Agent(ReActæ¨¡å¼) âœ…
â”‚   â”œâ”€â”€ super/              # Super Agent âœ…
â”‚   â”œâ”€â”€ orchestrator/       # ç¼–æ’Agent âœ…
â”‚   â”œâ”€â”€ atomic/             # åŸå­Agent ğŸ”¨
â”‚   â”œâ”€â”€ runtime/            # Agentè¿è¡Œæ—¶ ğŸ”¨
â”‚   â”œâ”€â”€ subagent/           # å­Agentç®¡ç† ğŸ”¨
â”‚   â””â”€â”€ security/           # å®‰å…¨æƒé™ ğŸ”¨
â”œâ”€â”€ system/
â”‚   â”œâ”€â”€ brain_pipeline/     # å¤§è„‘ç®¡é“ âœ…
â”‚   â”œâ”€â”€ llm/                # LLMç³»ç»Ÿ âœ…
â”‚   â”‚   â””â”€â”€ providers/      # OpenAI/Claude/Ollama âœ…
â”‚   â”œâ”€â”€ tools/              # å·¥å…·ç³»ç»Ÿ ğŸ”¨
â”‚   â”‚   â”œâ”€â”€ builtin/        # å†…ç½®å·¥å…· ğŸ”¨
â”‚   â”‚   â””â”€â”€ mcp/            # MCPé›†æˆ ğŸ”¨
â”‚   â””â”€â”€ services/           # æ ¸å¿ƒæœåŠ¡ âœ…
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ cerebellum_pipeline/ # ROS2é›†æˆ â³
â”œâ”€â”€ hardware/               # ç¡¬ä»¶æŠ½è±¡ â³
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ gateway/            # æ•°æ®ç½‘å…³ âœ…
â”‚   â”œâ”€â”€ explicit/           # æ˜¾æ€§æ•°æ® ğŸ”¨
â”‚   â””â”€â”€ implicit/           # éšæ€§æ•°æ® ğŸ”¨
â”œâ”€â”€ skills/                 # æŠ€èƒ½ç³»ç»Ÿ ğŸ”¨
â””â”€â”€ capability/             # èƒ½åŠ›å±‚ â³
```

---

## æ ¸å¿ƒæ¨¡å—å®ç°çŠ¶æ€

### å·²å®ç°åŠŸèƒ½

| æ¨¡å— | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| LLMç³»ç»Ÿ | OpenAI/Anthropic/Ollama Provider | âœ… å®Œæ•´ |
| LLMç³»ç»Ÿ | æµå¼è¾“å‡ºã€å·¥å…·è°ƒç”¨è½¬æ¢ | âœ… å®Œæ•´ |
| AgentåŸºç±» | LLMé›†æˆã€æ¶ˆæ¯å¤„ç†ã€çŠ¶æ€ç®¡ç† | âœ… å®Œæ•´ |
| æ¶ˆæ¯æ€»çº¿ | Agenté—´å¼‚æ­¥é€šä¿¡ã€å‘å¸ƒè®¢é˜… | âœ… å®Œæ•´ |
| é…ç½®ä¸­å¿ƒ | YAMLé…ç½®åŠ è½½ã€çƒ­æ›´æ–° | âœ… å®Œæ•´ |
| æ—¥å¿—ç³»ç»Ÿ | åˆ†çº§æ—¥å¿—ã€ç»Ÿä¸€æ ¼å¼ | âœ… å®Œæ•´ |

### éƒ¨åˆ†å®ç°ï¼ˆå¯ç”¨ä½†ä¸å®Œæ•´ï¼‰

| æ¨¡å— | å·²å®ç° | ç¼ºå¤± |
|------|--------|------|
| å·¥å…·ç³»ç»Ÿ | æ–‡ä»¶æ“ä½œå·¥å…· | HTTPå·¥å…·éƒ¨åˆ†åŠŸèƒ½ã€Shellå·¥å…·å®‰å…¨æ£€æŸ¥ |
| Agentè¿è¡Œæ—¶ | åŸºç¡€å¾ªç¯ | é”™è¯¯æ¢å¤ã€è¶…æ—¶å¤„ç† |
| æ•°æ®å±‚ | å†…å­˜å­˜å‚¨ | æŒä¹…åŒ–(SQLite/Redis)ã€å‘é‡æ£€ç´¢ |
| ç›‘æ§ç³»ç»Ÿ | æŒ‡æ ‡æ”¶é›†æ¡†æ¶ | å®é™…æŒ‡æ ‡é‡‡é›†ã€å‘Šè­¦ |

### ä»…æ¥å£å®šä¹‰ï¼ˆéœ€è¦å®ç°ï¼‰

| æ¨¡å— | è¯´æ˜ |
|------|------|
| ç¡¬ä»¶æŠ½è±¡å±‚ | ä¼ æ„Ÿå™¨/æ‰§è¡Œå™¨æ¥å£å·²å®šä¹‰ï¼Œæ— å®ç° |
| ROS2é›†æˆ | èŠ‚ç‚¹å°è£…å·²å®šä¹‰ï¼Œå®é™…é€šä¿¡æœªå®ç° |
| è§†è§‰Agent | æ¥å£å·²å®šä¹‰ï¼Œæ¨¡å‹è°ƒç”¨æœªå®ç° |
| æŠ€èƒ½ç³»ç»Ÿ | æ¡†æ¶å·²å®šä¹‰ï¼Œå…·ä½“æŠ€èƒ½é€»è¾‘æœªå®ç° |

---

## å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…
pip install -e .

# è¿è¡Œï¼ˆå½“å‰ä»…èƒ½å¯åŠ¨æ¡†æ¶ï¼‰
python -c "
import asyncio
from orb import OpenRoboBrain

async def main():
    brain = OpenRoboBrain()
    await brain.initialize()
    await brain.start()
    # ç³»ç»Ÿå¯åŠ¨ä½†æ— å®é™…åŠŸèƒ½
    await asyncio.sleep(5)
    await brain.stop()

asyncio.run(main())
"
```

---

## é…ç½®

ä¸»è¦é…ç½®æ–‡ä»¶: `configs/`
- `system.yaml` - ç³»ç»Ÿé…ç½®
- `agents.yaml` - Agenté…ç½®  
- `pipeline.yaml` - ç®¡é“é…ç½®
- `data.yaml` - æ•°æ®å±‚é…ç½®

LLMé…ç½®ç¤ºä¾‹ï¼ˆéœ€è¦åœ¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼‰:
```yaml
llm:
  provider: "openai"  # openai, anthropic, ollama
  model: "gpt-4"
  api_key: "${OPENAI_API_KEY}"
```

---

## å¼€å‘è¯´æ˜

### ä»£ç è§„èŒƒ
- Python 3.10+
- å¼‚æ­¥ä¼˜å…ˆ (asyncio)
- ç±»å‹æ³¨è§£å¿…é¡»
- æ–‡æ¡£å­—ç¬¦ä¸²å¿…é¡»

### æµ‹è¯•
```bash
# å½“å‰æ— æµ‹è¯•è¦†ç›–
pytest tests/  # TODO
```

### å…³é”®è®¾è®¡å†³ç­–

| å†³ç­– | è¯´æ˜ |
|------|------|
| **å¤§å°è„‘è§£è€¦** | å¤§è„‘(WebSocket JSON)å’Œå°è„‘(ROS2 DDS)å®Œå…¨è§£è€¦ï¼Œå„è‡ªç‹¬ç«‹æ¼”è¿› |
| **å”¯ä¸€æ¡¥æ¥ç‚¹** | Bridgeæ˜¯å¤§å°è„‘ä¹‹é—´çš„å”¯ä¸€äº¤äº’ç‚¹ï¼Œè´Ÿè´£å‘½ä»¤è½¬æ¢å’ŒçŠ¶æ€åŒæ­¥ |
| **åŒç®¡é“åˆ†å±‚** | å¤§è„‘ç®¡é“@ç³»ç»Ÿå±‚ï¼ˆéå®æ—¶ï¼‰ï¼Œå°è„‘ç®¡é“@ä¸­é—´ä»¶å±‚ï¼ˆå®æ—¶ï¼‰ |
| **ä¸‰çº§Agent** | Super(ç®¡ç†) â†’ ç¼–æ’(è°ƒåº¦) â†’ åŸå­(æ‰§è¡Œ) |
| **æ˜¾éšåˆ†ç¦»** | æ˜¾æ€§æ•°æ®å¯Agentä¿®æ”¹ï¼Œéšæ€§æ•°æ®(Policy)ä»…äººå·¥ä¿®æ”¹ |
| **å·¥å…·éš”ç¦»** | å¤§è„‘ç”¨è®¤çŸ¥å·¥å…·ï¼Œå°è„‘ç”¨ç¡¬ä»¶é©±åŠ¨ï¼Œäº’ä¸å½±å“ |
| **æ²™ç®±ç‹¬ç«‹** | å¤§è„‘ç”¨æƒé™æ§åˆ¶/Dockerï¼Œå°è„‘ç”¨ç¡¬ä»¶å®‰å…¨ç­–ç•¥ |
| **LLMæŠ½è±¡** | ç»Ÿä¸€æ¥å£ï¼Œæ”¯æŒå¤šProvideråˆ‡æ¢ |

---

## MuJoCo G1 ä»¿çœŸæ¼”ç¤º (feature/mujoco-g1-sim åˆ†æ”¯)

ä¸‰ç»ˆç«¯è”åŠ¨æ¼”ç¤º: è‡ªç„¶è¯­è¨€ -> LLM æ¨ç† -> æœºå™¨äººä»¿çœŸæ‰§è¡Œ

```
ç»ˆç«¯1 (CLI):       > å»å¨æˆ¿
                    OpenRoboBrain: å¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ å¯¼èˆªåˆ°å¨æˆ¿ã€‚

ç»ˆç«¯2 (ROS2):      [15:30:02] /brain/cmd_vel
                      command_type: navigate
                      parameters: {target: kitchen}

ç»ˆç«¯3 (MuJoCo):    [G1 æœºå™¨äººå¼€å§‹è¡Œèµ°æ­¥æ€, cmd=[0.5, 0, 0]]
```

### å¿«é€Ÿå¼€å§‹ (ä»¿çœŸ)

```bash
# 1. å®‰è£… Ollama + æ¨¡å‹
# https://ollama.com/download
ollama pull qwen2.5:3b

# 2. å®‰è£…ä»¿çœŸä¾èµ–
pip install -r requirements-sim.txt
git clone https://github.com/unitreerobotics/unitree_rl_gym.git

# 3. ä¸€é”®å¯åŠ¨ä¸‰ç»ˆç«¯
python scripts/start_sim.py
```

### æŠ€æœ¯æ ˆ

- **LLM**: Ollama + Qwen2.5 (æœ¬åœ°, æ”¯æŒ Tool Calling)
- **ç­–ç•¥**: unitree_rl_gym é¢„è®­ç»ƒè¡Œèµ°ç­–ç•¥ (PPO, 29-DOF)
- **ä»¿çœŸ**: MuJoCo + å®‡æ ‘ G1 äººå½¢æœºå™¨äºº
- **é€šä¿¡**: WebSocket å‘½ä»¤å¹¿æ’­

---

## è¯¦ç»†æ–‡æ¡£

- [ç³»ç»Ÿæ¶æ„è¯¦è§£](docs/ARCHITECTURE.md)
- [å¼€å‘è·¯çº¿å›¾](docs/ROADMAP.md)
- [å¾…åŠä»»åŠ¡](docs/TODO.md)
- [é£é™©ç®¡ç†](docs/RISKS.md)
